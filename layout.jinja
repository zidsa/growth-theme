<!DOCTYPE html>
<html
  class="no-js"
  lang="{{ session.lang }}"
  dir="{{ session.locale.language.direction }}"
>
  <head>
    <meta charset="utf-8" />
    <meta
      http-equiv="x-ua-compatible"
      content="ie=edge"
    />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
    />
    {% vitrin_head %}
    <link
      rel="preconnect"
      href="https://fonts.googleapis.com"
    />
    <link
      rel="preconnect"
      href="https://fonts.gstatic.com"
      crossorigin
    />

    <link
      rel="stylesheet"
      media="print"
      onload="this.onload=null;this.media='all'"
      href="https://fonts.googleapis.com/css2?family={{ settings.font_family | default('Roboto') }}:wght@300;400;500;700&display=swap"
    />
    {#
      Prettier ignore is needed here because the CSS contains Jinja template variables
      which cause Prettier's PostCSS parser to fail with "Cannot read properties of undefined (reading 'raw')"
    #}
    <!-- prettier-ignore-start -->
    <style>
      :root {
        /* Font */
        --font-family: {{ (settings.font_family | default('Roboto')).replace('+', ' ') }}, sans-serif;

        /* Customizable by merchant */
        --primary: {{ settings.theme_primary | default('#0B0A09') }};
        --primary-foreground: {{ settings.theme_primary_foreground | default('#FFFFFF') }};
        --secondary: {{ settings.theme_secondary | default('#F6F5F4') }};
        --accent: {{ settings.theme_accent | default('#A89C90') }};
        --background: {{ settings.theme_background | default('#FFFFFF') }};
        --foreground: {{ settings.theme_foreground | default('#0B0A09') }};
        --muted: {{ settings.theme_muted | default('#545352') }};
        --border: {{ settings.theme_border | default('#B5B5B5') }};

        /* Radius */
        --radius: {{ settings.theme_radius | default(4) }}px;
      }
    </style>
    <!-- prettier-ignore-end -->

    <link
      rel="stylesheet"
      type="text/css"
      href="{{ 'styles.css' | asset_url }}"
    />

    {# noUiSlider - For price range slider #}
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/nouislider@15.8.1/dist/nouislider.min.css"
    />

    {# TailwindPlus Elements #}
    <script
      src="https://cdn.jsdelivr.net/npm/@tailwindplus/elements@1"
      type="module"
    ></script>

    {# noUiSlider JS #}
    <script src="https://cdn.jsdelivr.net/npm/nouislider@15.8.1/dist/nouislider.min.js"></script>

    {# Embla Carousel - Correct versions for fade + autoplay #}
    <script src="https://cdn.jsdelivr.net/npm/embla-carousel@8.1.6/embla-carousel.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/embla-carousel-autoplay@8.1.6/embla-carousel-autoplay.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/embla-carousel-fade@8.1.6/embla-carousel-fade.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/embla-carousel-auto-scroll@8.1.6/embla-carousel-auto-scroll.umd.js"></script>

    {% if user_custom_css %}
      <link
        rel="stylesheet"
        href="{{ user_custom_css }}"
      />
    {% endif %}
  </head>
  <body
    data-template="{{ session.template }}"
    class="min-h-dvh font-sans antialiased"
  >
    {% include 'header.jinja' %}
    <main id="main">{% block content %}{% endblock %}</main>

    {% include 'footer.jinja' %}
    <script
      src="{{ 'locale-switcher.js' | asset_url }}"
      defer
    ></script>
    <script
      src="{{ 'js/price-slider.js' | asset_url }}"
      defer
    ></script>
    <script
      src="{{ 'js/product-filter.js' | asset_url }}"
      defer
    ></script>
    <script
      defer
      src="{{ 'js/product-gallery-carousel.js' | asset_url }}"
    ></script>
     <script
      defer
      src="{{ 'js/wishlist.js' | asset_url }}"
    ></script>
    <script
      defer
      src="{{ 'js/cart.js' | asset_url }}"
    ></script>

  <script  defer>
    // Product translations (used by product.js for variant changes)
    window.productTranslations = {
      discount: "{{ _('Discount') }}",
      remaining: "{{ _('Remaining %s only') }}",
      sold: "{{ _('Sold more than %s times') }}"
    };
    window.storeLowStockEnabled = {{ 'true' if store.settings.products.low_stock_enabled else 'false' }};
    window.storeLowStockThreshold = {{ store.settings.products.low_stock_threshold | default(5) }};
  </script>

  <script  defer src="{{ 'js/product.js' | asset_url }}"></script>
    {% vitrin_body %}
    {% block footer_scripts %}
    {% endblock %}
  </body>
</html>
