{#
  Category Card Component

  Displays a category with image and name below.
  Used in the categories grid on the categories listing page.

  Variables:
  - category: object (required) - Category object with id, slug, name, image, image_full_size
  - index: number (optional) - Card index for lazy loading
#}
{% set card_index = index | default(0) %}

<a
  href="{{ url_for('category_details', category_id=category.id, slug=category.slug) }}"
  class="group flex flex-col gap-4"
>
  {# Category Image Container #}
  <div class="bg-secondary relative aspect-square w-full overflow-hidden rounded">
    {% if category.image_full_size or category.image %}
      <img
        {% if category.image_full_size %}
          src="{{ image_url(category.image_full_size, w=400, q=90, f='auto') }}"
        {% else %}
          src="{{ image_url(category.image, w=400, q=90, f='auto') }}"
        {% endif %}
        alt="{{ category.name }}"
        class="h-full w-full object-cover object-center transition-transform duration-300 group-hover:scale-105"
        {% if card_index > 3 %}loading="lazy"{% endif %}
        onerror="this.style.display='none'"
      />
    {% endif %}
    <div class="pointer-events-none absolute inset-0 bg-white/10"></div>
  </div>

  {# Category Name - Always below #}
  <h3 class="text-foreground text-h4 text-center">{{ category.name }}</h3>
</a>
