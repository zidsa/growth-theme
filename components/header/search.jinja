<button
  type="button"
  command="show-modal"
  commandfor="search-dialog"
  class="flex size-10 items-center justify-center"
  aria-label="{{ _('Search') }}"
  data-search-trigger
>
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
    class="text-foreground"
    fill="none"
  >
    <path
      d="M9.37695 3.37329C11.0475 3.37338 12.4514 3.95645 13.6182 5.1311C14.7863 6.30701 15.3652 7.71368 15.3652 9.37915C15.3652 10.0477 15.2604 10.6838 15.0518 11.2903C14.8436 11.8953 14.5304 12.4664 14.1084 13.0042L13.833 13.3547L14.1494 13.6682L20.1631 19.6321L20.166 19.634C20.2363 19.7029 20.2705 19.7798 20.2705 19.8967C20.2704 19.9847 20.2509 20.0516 20.21 20.1106L20.1621 20.1672L20.1602 20.1692C20.0833 20.2468 20.0021 20.2815 19.8867 20.2815C19.772 20.2815 19.7016 20.2473 19.6377 20.179L19.6318 20.1731L19.625 20.1672L13.6367 14.1838L13.3105 13.8586L12.96 14.1565C12.5697 14.4877 12.1179 14.7581 11.6016 14.9661L11.376 15.052C10.7695 15.2676 10.1165 15.3772 9.41406 15.3772C7.71323 15.3772 6.29193 14.7923 5.11914 13.6184C3.9443 12.4422 3.36235 11.0371 3.3623 9.37524C3.3623 7.71348 3.94477 6.3084 5.12109 5.13208C6.29674 3.95628 7.70599 3.37329 9.37695 3.37329ZM9.39062 4.07642C8.01061 4.07651 6.81093 4.53417 5.81543 5.44165L5.61816 5.62915C4.58695 6.66009 4.06543 7.91834 4.06543 9.37524C4.06548 10.8321 4.5874 12.0894 5.61816 13.1204C6.65036 14.1527 7.91745 14.673 9.39062 14.6731C10.8518 14.6731 12.1081 14.1517 13.1289 13.1184C14.1478 12.087 14.6621 10.8301 14.6621 9.37524C14.6621 7.92014 14.1476 6.66252 13.1279 5.6311C12.1067 4.59801 10.8508 4.07642 9.39062 4.07642Z"
      fill="currentColor"
      stroke="currentColor"
    ></path>
  </svg>
</button>

{# Search Dialog - slides down from top #}
<el-dialog id="search-dialog-wrapper">
  <dialog
    id="search-dialog"
    class="fixed inset-0 size-auto max-h-none max-w-none overflow-y-auto bg-transparent backdrop:bg-transparent"
  >
    <el-dialog-backdrop
      class="fixed inset-0 bg-black/10 backdrop-blur-sm transition-opacity data-closed:opacity-0 data-enter:duration-300 data-enter:ease-out data-leave:duration-200 data-leave:ease-in"
    ></el-dialog-backdrop>

    <div
      tabindex="0"
      class="mt-[var(--announcement-bar-h,0px)] flex focus:outline-none"
    >
      <el-dialog-panel
        class="bg-background relative w-full transform overflow-hidden transition-all data-closed:-translate-y-full data-closed:opacity-0 data-enter:duration-300 data-enter:ease-out data-leave:duration-200 data-leave:ease-in"
      >
        <div class="px-4 py-3 md:px-16 md:py-4">
          <div class="theme-container">
            {# Search input bar #}
            <div class="flex items-center gap-4">
              <div class="form-input-wrapper flex-1 focus-within:border-foreground focus-within:border-2">
                {# Search icon #}
                <div data-slot="icon">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                  >
                    <path
                      d="M9.37695 3.37329C11.0475 3.37338 12.4514 3.95645 13.6182 5.1311C14.7863 6.30701 15.3652 7.71368 15.3652 9.37915C15.3652 10.0477 15.2604 10.6838 15.0518 11.2903C14.8436 11.8953 14.5304 12.4664 14.1084 13.0042L13.833 13.3547L14.1494 13.6682L20.1631 19.6321L20.166 19.634C20.2363 19.7029 20.2705 19.7798 20.2705 19.8967C20.2704 19.9847 20.2509 20.0516 20.21 20.1106L20.1621 20.1672L20.1602 20.1692C20.0833 20.2468 20.0021 20.2815 19.8867 20.2815C19.772 20.2815 19.7016 20.2473 19.6377 20.179L19.6318 20.1731L19.625 20.1672L13.6367 14.1838L13.3105 13.8586L12.96 14.1565C12.5697 14.4877 12.1179 14.7581 11.6016 14.9661L11.376 15.052C10.7695 15.2676 10.1165 15.3772 9.41406 15.3772C7.71323 15.3772 6.29193 14.7923 5.11914 13.6184C3.9443 12.4422 3.36235 11.0371 3.3623 9.37524C3.3623 7.71348 3.94477 6.3084 5.12109 5.13208C6.29674 3.95628 7.70599 3.37329 9.37695 3.37329ZM9.39062 4.07642C8.01061 4.07651 6.81093 4.53417 5.81543 5.44165L5.61816 5.62915C4.58695 6.66009 4.06543 7.91834 4.06543 9.37524C4.06548 10.8321 4.5874 12.0894 5.61816 13.1204C6.65036 14.1527 7.91745 14.673 9.39062 14.6731C10.8518 14.6731 12.1081 14.1517 13.1289 13.1184C14.1478 12.087 14.6621 10.8301 14.6621 9.37524C14.6621 7.92014 14.1476 6.66252 13.1279 5.6311C12.1067 4.59801 10.8508 4.07642 9.39062 4.07642Z"
                      fill="currentColor"
                      stroke="currentColor"
                    ></path>
                  </svg>
                </div>
                {# Input field #}
                <input
                  type="text"
                  id="search-input"
                  name="q"
                  autocomplete="off"
                  placeholder="{{ _('Search') }}"
                  data-search-input
                />
                {# Clear input button - trash icon #}
                <button
                  type="button"
                  class="text-muted-foreground hidden shrink-0"
                  data-search-clear
                  aria-label="{{ _('Clear search') }}"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                  >
                    <path
                      d="M7 21C6.45 21 5.97917 20.8042 5.5875 20.4125C5.19583 20.0208 5 19.55 5 19V6H4V4H9V3H15V4H20V6H19V19C19 19.55 18.8042 20.0208 18.4125 20.4125C18.0208 20.8042 17.55 21 17 21H7ZM17 6H7V19H17V6ZM9 17H11V8H9V17ZM13 17H15V8H13V17Z"
                      fill="currentColor"
                    />
                  </svg>
                </button>
              </div>
              {# Close button #}
              <button
                type="button"
                command="close"
                commandfor="search-dialog"
                class="flex size-10 shrink-0 items-center justify-center"
                aria-label="{{ _('Close search') }}"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                >
                  <path
                    d="M18 6L6 18M6 6L18 18"
                    stroke="currentColor"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
              </button>
            </div>

            {# Search results area #}
            <div
              class="flex hidden flex-col space-y-4 md:p-4"
              data-search-results
            >
              {# Results header #}
              <span class="text-muted text-body2 py-2">{{ _("Results") }}</span>
              {# Products grid #}
              <div
                class="flex gap-4 overflow-x-auto"
                data-search-products
              ></div>
              {# Search for link #}
              <div class="border-border-light border-t pt-4">
                <a
                  href="#"
                  class="text-foreground text-body1 flex items-center gap-1 py-2"
                  data-search-all-link
                >
                  <span data-search-all-text>{{ _("Search for") }} ''</span>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    viewBox="0 0 16 16"
                    fill="none"
                    class="rtl:rotate-180"
                  >
                    <path
                      d="M3 8H13M9 4L13 8L9 12"
                      stroke="currentColor"
                      stroke-width="1.5"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                  </svg>
                </a>
              </div>
            </div>

            {# Loading state #}
            <div
              class="flex hidden flex-col space-y-4 p-4"
              data-search-loading
            >
              <span class="text-muted text-body2 py-2">{{ _("Searching...") }}</span>
              <div class="flex gap-4 overflow-x-auto">
                {% for i in range(4) %}
                  <div class="w-[320px] shrink-0 md:w-[380px]">
                    <div class="bg-secondary aspect-[380/420] animate-pulse rounded"></div>
                    <div class="mt-4 flex flex-col gap-2">
                      <div class="bg-secondary h-5 w-3/4 animate-pulse rounded"></div>
                      <div class="bg-secondary h-4 w-1/2 animate-pulse rounded"></div>
                      <div class="bg-secondary h-4 w-2/3 animate-pulse rounded"></div>
                    </div>
                  </div>
                {% endfor %}
              </div>
            </div>

            {# No results state #}
            <div
              class="hidden px-4 py-8 text-center"
              data-search-empty
            >
              <p class="text-muted text-body1">{{ _("No products found") }}</p>
            </div>
          </div>
        </div>
      </el-dialog-panel>
    </div>
  </dialog>
</el-dialog>
