{#
  Merchant Badge Component

  Displays custom merchant-configured badges on products.
  Supports 7 badge types with unique colors and icons.

  Parameters:
  - product (required): Product object with badge data

  Usage:
  {% if product.badge %}
    {% with product=product %}
      {% include 'components/products/merchant-badge.jinja' %}
    {% endwith %}
  {% endif %}
#}

{% if product.badge %}
  {# Get badge type from product.badge.icon.code #}
  {% set badge_type = product.badge.icon.code if product.badge.icon else '' %}

  {# Color mappings #}
  {%
    set badge_colors = {
      'featured_product': 'bg-[#F1EFFE] border-[#F1EFFE] text-[#7462F4]',
      'free_shipping': 'bg-[#E7FAF4] border-[#E7FAF4] text-[#0DA072]',
      'selling_fast': 'bg-[#D1E9FF] border-[#D1E9FF] text-[#175CD3]',
      'on_sale': 'bg-[#FEE4E2] border-[#FEE4E2] text-[#D92C20]',
      'limited_quantity': 'bg-[#FEF8D8] border-[#FEF8D8] text-[#978325]',
      'discount_value': 'bg-[#FEE4E2] border-[#FEE4E2] text-[#D92C20]',
      'discount_percent': 'bg-[#FEE4E2] border-[#FEE4E2] text-[#D92C20]'
    }
  %}

  {# Icon fill colors (for SVG) #}
  {%
    set icon_colors = {
      'featured_product': '#7462F4',
      'free_shipping': '#0DA072',
      'selling_fast': '#175CD3',
      'on_sale': '#D92C20',
      'limited_quantity': '#978325',
      'discount_value': '#D92C20',
      'discount_percent': '#D92C20'
    }
  %}

  {# SVG icon paths #}
  {%
    set icons = {
      'featured_product': '<path d="M10.0002 3.83507C9.96866 3.74362 9.91122 3.66329 9.8349 3.60382C9.75857 3.54436 9.66663 3.50832 9.57023 3.50007L6.72523 3.08507L5.45023 0.500073C5.40929 0.415537 5.34536 0.344244 5.26578 0.294359C5.18619 0.244475 5.09416 0.218018 5.00023 0.218018C4.9063 0.218018 4.81428 0.244475 4.73469 0.294359C4.6551 0.344244 4.59118 0.415537 4.55023 0.500073L3.27523 3.08007L0.430233 3.50007C0.337694 3.51323 0.250695 3.55205 0.179108 3.61215C0.107521 3.67225 0.0542128 3.75121 0.0252329 3.84007C-0.00129466 3.92691 -0.00367518 4.01933 0.0183467 4.10742C0.0403687 4.19551 0.0859617 4.27594 0.150233 4.34007L2.21523 6.34007L1.71523 9.18007C1.69738 9.27381 1.70673 9.3707 1.74217 9.4593C1.77761 9.5479 1.83766 9.6245 1.91523 9.68007C1.99084 9.73413 2.08002 9.76603 2.17276 9.77222C2.26549 9.7784 2.35812 9.75861 2.44023 9.71507L5.00023 8.38007L7.55023 9.72007C7.62041 9.75966 7.69966 9.78034 7.78023 9.78007C7.88615 9.78045 7.98944 9.74718 8.07523 9.68507C8.15281 9.6295 8.21286 9.5529 8.2483 9.4643C8.28374 9.3757 8.29308 9.27881 8.27523 9.18507L7.77523 6.34507L9.84023 4.34507C9.91242 4.28391 9.96578 4.20352 9.9941 4.11325C10.0224 4.02297 10.0245 3.92651 10.0002 3.83507ZM6.92523 5.83507C6.86659 5.89179 6.82272 5.96199 6.79745 6.03956C6.77218 6.11713 6.76626 6.1997 6.78023 6.28007L7.14023 8.37507L5.26023 7.37507C5.18789 7.33655 5.10719 7.31641 5.02523 7.31641C4.94327 7.31641 4.86257 7.33655 4.79023 7.37507L2.91023 8.37507L3.27023 6.28007C3.2842 6.1997 3.27829 6.11713 3.25302 6.03956C3.22774 5.96199 3.18387 5.89179 3.12523 5.83507L1.62523 4.33507L3.73023 4.03007C3.81123 4.01881 3.88823 3.98784 3.95448 3.9399C4.02073 3.89195 4.07421 3.82849 4.11023 3.75507L5.00023 1.85007L5.94023 3.76007C5.97625 3.83349 6.02973 3.89695 6.09598 3.9449C6.16223 3.99284 6.23923 4.02381 6.32023 4.03507L8.42523 4.34007L6.92523 5.83507Z"/>',
      'free_shipping': '<path d="M0.5 5.25V7.75C0.5 7.88261 0.552678 8.00979 0.646447 8.10355C0.740215 8.19732 0.867392 8.25 1 8.25H1.5C1.5 8.64782 1.65804 9.02936 1.93934 9.31066C2.22064 9.59196 2.60218 9.75 3 9.75C3.39782 9.75 3.77936 9.59196 4.06066 9.31066C4.34196 9.02936 4.5 8.64782 4.5 8.25H7.5C7.5 8.64782 7.65804 9.02936 7.93934 9.31066C8.22064 9.59196 8.60218 9.75 9 9.75C9.39782 9.75 9.77936 9.59196 10.0607 9.31066C10.342 9.02936 10.5 8.64782 10.5 8.25H11C11.1326 8.25 11.2598 8.19732 11.3536 8.10355C11.4473 8.00979 11.5 7.88261 11.5 7.75V1.75C11.5 1.35218 11.342 0.970644 11.0607 0.68934C10.7794 0.408035 10.3978 0.25 10 0.25H5.5C5.10218 0.25 4.72064 0.408035 4.43934 0.68934C4.15804 0.970644 4 1.35218 4 1.75V2.75H3C2.76713 2.75 2.53746 2.80422 2.32918 2.90836C2.1209 3.0125 1.93972 3.16371 1.8 3.35L0.6 4.95C0.585376 4.97173 0.573612 4.99526 0.565 5.02L0.535 5.075C0.512933 5.13076 0.501078 5.19004 0.5 5.25ZM8.5 8.25C8.5 8.15111 8.52932 8.05444 8.58426 7.97221C8.63921 7.88999 8.7173 7.8259 8.80866 7.78806C8.90002 7.75022 9.00056 7.74031 9.09755 7.75961C9.19454 7.7789 9.28363 7.82652 9.35355 7.89645C9.42348 7.96637 9.4711 8.05546 9.49039 8.15245C9.50969 8.24944 9.49978 8.34998 9.46194 8.44134C9.4241 8.5327 9.36001 8.61079 9.27779 8.66574C9.19556 8.72068 9.09889 8.75 9 8.75C8.86739 8.75 8.74021 8.69732 8.64645 8.60355C8.55268 8.50979 8.5 8.38261 8.5 8.25ZM5 1.75C5 1.61739 5.05268 1.49021 5.14645 1.39645C5.24021 1.30268 5.36739 1.25 5.5 1.25H10C10.1326 1.25 10.2598 1.30268 10.3536 1.39645C10.4473 1.49021 10.5 1.61739 10.5 1.75V7.25H10.11C9.96941 7.09532 9.79804 6.97174 9.60689 6.88717C9.41574 6.8026 9.20902 6.75891 9 6.75891C8.79098 6.75891 8.58426 6.8026 8.39311 6.88717C8.20196 6.97174 8.03059 7.09532 7.89 7.25H5V1.75ZM4 4.75H2L2.6 3.95C2.64657 3.8879 2.70697 3.8375 2.77639 3.80279C2.84582 3.76807 2.92238 3.75 3 3.75H4V4.75ZM2.5 8.25C2.5 8.15111 2.52932 8.05444 2.58427 7.97221C2.63921 7.88999 2.7173 7.8259 2.80866 7.78806C2.90002 7.75022 3.00055 7.74031 3.09755 7.75961C3.19454 7.7789 3.28363 7.82652 3.35355 7.89645C3.42348 7.96637 3.4711 8.05546 3.49039 8.15245C3.50969 8.24944 3.49978 8.34998 3.46194 8.44134C3.4241 8.5327 3.36001 8.61079 3.27779 8.66574C3.19556 8.72068 3.09889 8.75 3 8.75C2.86739 8.75 2.74021 8.69732 2.64645 8.60355C2.55268 8.50979 2.5 8.38261 2.5 8.25ZM1.5 5.75H4V7.14C3.70492 6.87628 3.31757 6.73986 2.92235 6.76046C2.52713 6.78106 2.15606 6.95702 1.89 7.25H1.5V5.75Z"/>',
      'selling_fast': '<path d="M8.5 0H1.5C1.10218 0 0.720644 0.158035 0.43934 0.43934C0.158035 0.720644 0 1.10218 0 1.5V8.5C0 8.89782 0.158035 9.27936 0.43934 9.56066C0.720644 9.84196 1.10218 10 1.5 10H8.5C8.89782 10 9.27936 9.84196 9.56066 9.56066C9.84196 9.27936 10 8.89782 10 8.5V1.5C10 1.10218 9.84196 0.720644 9.56066 0.43934C9.27936 0.158035 8.89782 0 8.5 0ZM4 1H6V2.565L5.275 2.065C5.19336 2.01124 5.09775 1.98258 5 1.98258C4.90225 1.98258 4.80664 2.01124 4.725 2.065L4 2.565V1ZM9 8.5C9 8.63261 8.94732 8.75979 8.85355 8.85355C8.75979 8.94732 8.63261 9 8.5 9H1.5C1.36739 9 1.24021 8.94732 1.14645 8.85355C1.05268 8.75979 1 8.63261 1 8.5V1.5C1 1.36739 1.05268 1.24021 1.14645 1.14645C1.24021 1.05268 1.36739 1 1.5 1H3V3.5C3.00024 3.59045 3.02502 3.67914 3.07168 3.75663C3.11835 3.83411 3.18516 3.89749 3.265 3.94C3.34319 3.98015 3.43057 3.99897 3.51835 3.99458C3.60614 3.9902 3.69121 3.96274 3.765 3.915L5 3.1L6.225 3.915C6.3002 3.96452 6.38738 3.99282 6.47733 3.99691C6.56728 4.00099 6.65666 3.98071 6.73604 3.9382C6.81542 3.8957 6.88184 3.83255 6.9283 3.75542C6.97477 3.67829 6.99954 3.59004 7 3.5V1H8.5C8.63261 1 8.75979 1.05268 8.85355 1.14645C8.94732 1.24021 9 1.36739 9 1.5V8.5Z"/>',
      'on_sale': '<path d="M2.75001 2.00001C2.60167 2.00001 2.45667 2.044 2.33333 2.12641C2.20999 2.20882 2.11386 2.32595 2.0571 2.463C2.00033 2.60004 1.98548 2.75084 2.01442 2.89633C2.04336 3.04181 2.11479 3.17545 2.21968 3.28034C2.32457 3.38523 2.4582 3.45666 2.60369 3.4856C2.74918 3.51454 2.89998 3.49968 3.03702 3.44292C3.17407 3.38615 3.2912 3.29002 3.37361 3.16669C3.45602 3.04335 3.50001 2.89834 3.50001 2.75001C3.50001 2.5511 3.42099 2.36033 3.28034 2.21968C3.13969 2.07903 2.94892 2.00001 2.75001 2.00001ZM9.56001 4.35501L5.35501 0.145008C5.30829 0.0986677 5.25288 0.062005 5.19196 0.0371227C5.13104 0.0122404 5.06581 -0.000372089 5.00001 8.35715e-06H0.500008C0.3674 8.35715e-06 0.240223 0.0526868 0.146455 0.146455C0.0526868 0.240223 8.35715e-06 0.3674 8.35715e-06 0.500008V5.00001C-0.000372089 5.06581 0.0122404 5.13104 0.0371227 5.19196C0.062005 5.25288 0.0986677 5.30829 0.145008 5.35501L4.35501 9.56001C4.63626 9.84091 5.01751 9.99869 5.41501 9.99869C5.81251 9.99869 6.19376 9.84091 6.47501 9.56001L9.56001 6.50001C9.84091 6.21876 9.99869 5.83751 9.99869 5.44001C9.99869 5.04251 9.84091 4.66126 9.56001 4.38001V4.35501ZM8.85501 5.76501L5.76501 8.85001C5.67133 8.94313 5.5446 8.99541 5.41251 8.99541C5.28042 8.99541 5.15369 8.94313 5.06001 8.85001L1.00001 4.79501V1.00001H4.79501L8.85501 5.06001C8.90135 5.10673 8.93801 5.16214 8.96289 5.22306C8.98778 5.28397 9.00039 5.34921 9.00001 5.41501C8.99946 5.54618 8.94738 5.67188 8.85501 5.76501Z" />',
      'limited_quantity': '<path d="M8.5 0H1.5C1.10218 0 0.720644 0.158035 0.43934 0.43934C0.158035 0.720644 0 1.10218 0 1.5V8.5C0 8.89782 0.158035 9.27936 0.43934 9.56066C0.720644 9.84196 1.10218 10 1.5 10H8.5C8.89782 10 9.27936 9.84196 9.56066 9.56066C9.84196 9.27936 10 8.89782 10 8.5V1.5C10 1.10218 9.84196 0.720644 9.56066 0.43934C9.27936 0.158035 8.89782 0 8.5 0ZM4 1H6V2.565L5.275 2.065C5.19336 2.01124 5.09775 1.98258 5 1.98258C4.90225 1.98258 4.80664 2.01124 4.725 2.065L4 2.565V1ZM9 8.5C9 8.63261 8.94732 8.75979 8.85355 8.85355C8.75979 8.94732 8.63261 9 8.5 9H1.5C1.36739 9 1.24021 8.94732 1.14645 8.85355C1.05268 8.75979 1 8.63261 1 8.5V1.5C1 1.36739 1.05268 1.24021 1.14645 1.14645C1.24021 1.05268 1.36739 1 1.5 1H3V3.5C3.00024 3.59045 3.02502 3.67914 3.07168 3.75663C3.11835 3.83411 3.18516 3.89749 3.265 3.94C3.34319 3.98015 3.43057 3.99897 3.51835 3.99458C3.60614 3.9902 3.69121 3.96274 3.765 3.915L5 3.1L6.225 3.915C6.3002 3.96452 6.38738 3.99282 6.47733 3.99691C6.56728 4.00099 6.65666 3.98071 6.73604 3.9382C6.81542 3.8957 6.88184 3.83255 6.9283 3.75542C6.97477 3.67829 6.99954 3.59004 7 3.5V1H8.5C8.63261 1 8.75979 1.05268 8.85355 1.14645C8.94732 1.24021 9 1.36739 9 1.5V8.5Z"/>',
      'discount_value': '<path d="M2.75001 2.00001C2.60167 2.00001 2.45667 2.044 2.33333 2.12641C2.20999 2.20882 2.11386 2.32595 2.0571 2.463C2.00033 2.60004 1.98548 2.75084 2.01442 2.89633C2.04336 3.04181 2.11479 3.17545 2.21968 3.28034C2.32457 3.38523 2.4582 3.45666 2.60369 3.4856C2.74918 3.51454 2.89998 3.49968 3.03702 3.44292C3.17407 3.38615 3.2912 3.29002 3.37361 3.16669C3.45602 3.04335 3.50001 2.89834 3.50001 2.75001C3.50001 2.5511 3.42099 2.36033 3.28034 2.21968C3.13969 2.07903 2.94892 2.00001 2.75001 2.00001ZM9.56001 4.35501L5.35501 0.145008C5.30829 0.0986677 5.25288 0.062005 5.19196 0.0371227C5.13104 0.0122404 5.06581 -0.000372089 5.00001 8.35715e-06H0.500008C0.3674 8.35715e-06 0.240223 0.0526868 0.146455 0.146455C0.0526868 0.240223 8.35715e-06 0.3674 8.35715e-06 0.500008V5.00001C-0.000372089 5.06581 0.0122404 5.13104 0.0371227 5.19196C0.062005 5.25288 0.0986677 5.30829 0.145008 5.35501L4.35501 9.56001C4.63626 9.84091 5.01751 9.99869 5.41501 9.99869C5.81251 9.99869 6.19376 9.84091 6.47501 9.56001L9.56001 6.50001C9.84091 6.21876 9.99869 5.83751 9.99869 5.44001C9.99869 5.04251 9.84091 4.66126 9.56001 4.38001V4.35501ZM8.85501 5.76501L5.76501 8.85001C5.67133 8.94313 5.5446 8.99541 5.41251 8.99541C5.28042 8.99541 5.15369 8.94313 5.06001 8.85001L1.00001 4.79501V1.00001H4.79501L8.85501 5.06001C8.90135 5.10673 8.93801 5.16214 8.96289 5.22306C8.98778 5.28397 9.00039 5.34921 9.00001 5.41501C8.99946 5.54618 8.94738 5.67188 8.85501 5.76501Z" />',
      'discount_percent': '<path d="M2.75001 2.00001C2.60167 2.00001 2.45667 2.044 2.33333 2.12641C2.20999 2.20882 2.11386 2.32595 2.0571 2.463C2.00033 2.60004 1.98548 2.75084 2.01442 2.89633C2.04336 3.04181 2.11479 3.17545 2.21968 3.28034C2.32457 3.38523 2.4582 3.45666 2.60369 3.4856C2.74918 3.51454 2.89998 3.49968 3.03702 3.44292C3.17407 3.38615 3.2912 3.29002 3.37361 3.16669C3.45602 3.04335 3.50001 2.89834 3.50001 2.75001C3.50001 2.5511 3.42099 2.36033 3.28034 2.21968C3.13969 2.07903 2.94892 2.00001 2.75001 2.00001ZM9.56001 4.35501L5.35501 0.145008C5.30829 0.0986677 5.25288 0.062005 5.19196 0.0371227C5.13104 0.0122404 5.06581 -0.000372089 5.00001 8.35715e-06H0.500008C0.3674 8.35715e-06 0.240223 0.0526868 0.146455 0.146455C0.0526868 0.240223 8.35715e-06 0.3674 8.35715e-06 0.500008V5.00001C-0.000372089 5.06581 0.0122404 5.13104 0.0371227 5.19196C0.062005 5.25288 0.0986677 5.30829 0.145008 5.35501L4.35501 9.56001C4.63626 9.84091 5.01751 9.99869 5.41501 9.99869C5.81251 9.99869 6.19376 9.84091 6.47501 9.56001L9.56001 6.50001C9.84091 6.21876 9.99869 5.83751 9.99869 5.44001C9.99869 5.04251 9.84091 4.66126 9.56001 4.38001V4.35501ZM8.85501 5.76501L5.76501 8.85001C5.67133 8.94313 5.5446 8.99541 5.41251 8.99541C5.28042 8.99541 5.15369 8.94313 5.06001 8.85001L1.00001 4.79501V1.00001H4.79501L8.85501 5.06001C8.90135 5.10673 8.93801 5.16214 8.96289 5.22306C8.98778 5.28397 9.00039 5.34921 9.00001 5.41501C8.99946 5.54618 8.94738 5.67188 8.85501 5.76501Z" />'
    }
  %}

  {# Get badge classes and icon #}
  {% set badge_class = badge_colors.get(badge_type, 'bg-[#6f42c1] border-[#6f42c1] text-white') %}
  {% set icon_color = icon_colors.get(badge_type, '#FFFFFF') %}
  {% set icon_path = icons.get(badge_type, '') %}

  {# Get badge text based on language #}
  {% set badge_text = product.badge.body.ar if session.lang == 'ar' else product.badge.body.en %}

  <span
    class="{{ badge_class }} inline-flex items-center gap-1.5 rounded-full border px-2 py-0.5 text-xs whitespace-nowrap"
  >
    {% if icon_path %}
      <svg
        width="10"
        height="10"
        viewBox="0 0 10 10"
        xmlns="http://www.w3.org/2000/svg"
        fill="{{ icon_color }}"
        class="shrink-0"
      >
        {{ icon_path | safe }}
      </svg>
    {% endif %}
    <span>{{ badge_text | safe }}</span>
  </span>
{% endif %}
