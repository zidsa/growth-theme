{# Button Group Component - Radio/Checkbox buttons styled as toggle buttons #}
{% set input_type = type|default('single') == 'single' and 'radio' or 'checkbox' %}
{% set is_separated = separated|default(false) %}

<div
  class="{{ wrapper_class|default('') }} flex w-fit items-center"
  role="{{ input_type == 'radio' and 'radiogroup' or 'group' }}"
  aria-label="{{ aria_label|default('') }}"
  {{ attrs|default('')|safe }}
>
  {% for option in options %}
    {% set size_classes = option.icon_only and 'size-10 p-0' or 'px-4 py-2' %}
    {% set rounded_classes = is_separated and 'rounded' or (loop.first and 'rounded-s' or (loop.last and 'rounded-e border-s-0' or 'rounded-none border-s-0')) %}
    <label
      class="text-foreground text-body1 hover:border-foreground has-[:checked]:border-foreground has-[:checked]:bg-foreground has-[:checked]:text-primary-foreground {{ size_classes }} {{ rounded_classes }} {{ option.class|default('') }} border-muted has-[:checked:disabled]:border-border-disabled has-[:disabled]:border-border-disabled has-[:disabled]:text-muted inline-flex shrink-0 cursor-pointer items-center justify-center gap-2 border bg-transparent font-normal transition-all focus-within:z-10 has-[:disabled]:cursor-not-allowed has-[:disabled]:line-through"
      {% if option.onclick %}onclick="{{ option.onclick }}"{% endif %}
    >
      <input
        type="{{ input_type }}"
        id="{{ option.id|default(name ~ '-' ~ loop.index) }}"
        name="{{ name }}"
        value="{{ option.value }}"
        {% if option.checked %}checked{% endif %}
        {% if option.disabled %}disabled{% endif %}
        {% if option.required %}required{% endif %}
        class="sr-only"
        {{ option.attrs|default('')|safe }}
      />
      {% if option.icon %}
        {{ option.icon|safe }}
      {% endif %}
      {% if not option.icon_only and option.label %}
        {{ option.label }}
      {% endif %}
    </label>
  {% endfor %}
</div>
