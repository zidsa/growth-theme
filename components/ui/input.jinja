{#
  Input Component

  A form input field with optional start/end icons.

  Parameters:
    - type: (string) Input type - text, email, password, number, date, time, etc. Default: "text"
    - name: (string) Input name attribute
    - id: (string) Input ID. Auto-generated if not provided
    - value: (string) Input value
    - placeholder: (string) Placeholder text
    - required: (boolean) Makes the input required
    - disabled: (boolean) Disables the input
    - readonly: (boolean) Makes input read-only
    - autocomplete: (string) Autocomplete attribute
    - inputmode: (string) Input mode for mobile keyboards
    - minlength: (number) Minimum length
    - maxlength: (number) Maximum length
    - pattern: (string) Validation pattern
    - icon_start: (string) HTML for start icon (24x24)
    - icon_end: (string) HTML for end icon (24x24)
    - caption: (string) Helper text below input
    - error: (boolean) Error state
    - error_message: (string) Error message (replaces caption when error)
    - wrapper_class: (string) Additional classes for wrapper div
    - input_class: (string) Additional classes for input element
    - attrs: (string) Additional HTML attributes for input

  Usage:
    Basic:
    {% with name="email", placeholder=_("Enter email") %}
      {% include 'components/ui/input.jinja' %}
    {% endwith %}

    With icons:
    {% set search_icon %}
      <svg>...</svg>
    {% endset %}
    {% with name="search", placeholder=_("Search"), icon_start=search_icon %}
      {% include 'components/ui/input.jinja' %}
    {% endwith %}

    With label (use label.jinja separately):
    {% with for="email", content=_("Email"), required=true %}
      {% include 'components/ui/label.jinja' %}
    {% endwith %}
    {% with id="email", name="email", type="email", required=true %}
      {% include 'components/ui/input.jinja' %}
    {% endwith %}
#}

{% set input_id = id|default(name ~ '-' ~ range(1000, 9999)|random) %}

<div class="{{ wrapper_class|default('') }}">
  {# Input Container #}
  <div
    class="{{- ' border-destructive border-2' if error else ' border-muted' }} {{- ' hover:border-2' if not disabled and not error }} {{- ' focus-within:border-foreground focus-within:border-2' if not error }} {{- ' bg-background-disabled border-border-disabled' if disabled else '' }} relative flex h-12 items-center gap-3 rounded border px-3 transition-[border-color,border-width]"
    {% if disabled %}data-disabled="true"{% endif %}
    {% if error %}data-error="true"{% endif %}
  >
    {# Start Icon #}
    {% if icon_start %}
      <div class="{{ 'text-muted' if disabled else 'text-foreground' }} shrink-0 [&>svg]:size-6">
        {{ icon_start|safe }}
      </div>
    {% endif %}

    {# Input #}
    <input
      type="{{ type|default('text') }}"
      id="{{ input_id }}"
      {% if name %}name="{{ name }}"{% endif %}
      value="{{ value|default('') }}"
      placeholder="{{ placeholder|default('') }}"
      {% if required %}required{% endif %}
      {% if disabled %}disabled{% endif %}
      {% if readonly %}readonly{% endif %}
      {% if autocomplete %}autocomplete="{{ autocomplete }}"{% endif %}
      {% if inputmode %}inputmode="{{ inputmode }}"{% endif %}
      {% if minlength %}minlength="{{ minlength }}"{% endif %}
      {% if maxlength %}maxlength="{{ maxlength }}"{% endif %}
      {% if pattern %}pattern="{{ pattern }}"{% endif %}
      {% if error %}aria-invalid="true"{% endif %}
      class="text-foreground {{ input_class|default('') }} text-body1 placeholder:text-muted disabled:text-muted h-full w-full flex-1 bg-transparent outline-none disabled:cursor-not-allowed"
      {{ attrs|default('')|safe }}
    />

    {# End Icon #}
    {% if icon_end %}
      <div class="{{ 'text-muted' if disabled else 'text-foreground' }} shrink-0 [&>svg]:size-6">
        {{ icon_end|safe }}
      </div>
    {% endif %}
  </div>

  {# Caption / Error Message #}
  {% if caption or error_message %}
    <p class="{{ 'text-destructive' if error else 'text-muted' }} text-caption mt-2">
      {{ error_message if error and error_message else caption }}
    </p>
  {% endif %}
</div>
