@import "tailwindcss";
@import "./components.css";
@import "nouislider/dist/nouislider.css";
@import "photoswipe/dist/photoswipe.css";

@plugin "@tailwindcss/typography";

:root {
  /* ========== LAYOUT ========== */
  --header-h: 107px;

  /* ========== DERIVED TOKENS (fixed) ========== */
  --muted-foreground: #858484;
  --border-light: #f2f2f2;

  /* ========== FIXED SYSTEM COLORS ========== */
  --destructive: #c22b51;
  --destructive-foreground: #ffffff;
  --success: #649560;
  --success-foreground: #ffffff;
  --warning: #ffb400;
  --warning-foreground: #0b0a09;

  /* ========== TYPOGRAPHY - HEADINGS ========== */
  --font-h0--size: 64px;
  --font-h0--line-height: 1.2;
  --font-h0--weight: 400;

  --font-h1--size: 56px;
  --font-h1--line-height: 1.2;
  --font-h1--weight: 400;

  --font-h2--size: 48px;
  --font-h2--line-height: 1.2;
  --font-h2--weight: 400;

  --font-h3--size: 40px;
  --font-h3--line-height: 1.2;
  --font-h3--weight: 400;

  --font-h4--size: 32px;
  --font-h4--line-height: 1.3;
  --font-h4--weight: 400;

  --font-h5--size: 24px;
  --font-h5--line-height: 1.4;
  --font-h5--weight: 400;

  --font-h6--size: 20px;
  --font-h6--line-height: 1.4;
  --font-h6--weight: 400;

  /* ========== TYPOGRAPHY - BODY TEXT ========== */
  --font-subtitle1--size: 16px;
  --font-subtitle1--line-height: 1.5;
  --font-subtitle1--weight: 600;

  --font-body1--size: 16px;
  --font-body1--line-height: 1.5;
  --font-body1--weight: 400;

  --font-subtitle2--size: 14px;
  --font-subtitle2--line-height: 1.5;
  --font-subtitle2--weight: 600;

  --font-body2--size: 14px;
  --font-body2--line-height: 1.5;
  --font-body2--weight: 400;

  --font-caption--size: 12px;
  --font-caption--line-height: 1.5;
  --font-caption--weight: 400;

  --font-caption-bold--size: 12px;
  --font-caption-bold--line-height: 1.5;
  --font-caption-bold--weight: 700;

  --font-tagline--size: 16px;
  --font-tagline--line-height: normal;
  --font-tagline--weight: 400;
}

@theme inline {
  /* ========== CORE COLORS (set by layout.jinja from merchant settings) ========== */
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);

  /* ========== FIXED SYSTEM COLORS ========== */
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-success: var(--success);
  --color-success-foreground: var(--success-foreground);
  --color-warning: var(--warning);
  --color-warning-foreground: var(--warning-foreground);

  /* ========== UTILITY COLORS ========== */
  --color-border-light: var(--border-light);

  /* ========== FONT ========== */
  --font-sans: var(--font-family);

  /* ========== RADIUS ========== */
  --radius-sm: calc(var(--radius) * 0.5);
  --radius-md: var(--radius);
  --radius-lg: calc(var(--radius) * 2);
  --radius-xl: calc(var(--radius) * 3);
}

body {
  background: var(--background);
  color: var(--foreground);
}

.theme-container {
  max-width: 1440px;
  width: 100%;
  margin: 0 auto;
}

/* ========== noUiSlider Price Range Styles ========== */
.price-range-slider {
  margin: 8px 2px 22px !important;
}

/* Track background */
.noUi-target {
  border: none !important;
  box-shadow: none !important;
  background: var(--secondary) !important;
  border-radius: var(--radius) !important;
  display: flex !important;
  height: 4px !important;
  flex-direction: column !important;
  align-items: flex-start !important;
  flex-shrink: 0 !important;
}

.noUi-base,
.noUi-connects {
  border-radius: inherit !important;
  width: 100% !important;
  height: 100% !important;
}

/* Filled / connect segment */
.noUi-connect {
  border-radius: calc(var(--radius) * 0.5) !important;
  background: var(--accent) !important;
}

/* Handles */
.noUi-horizontal .noUi-handle {
  width: 20px !important;
  height: 20px !important;
  border-radius: 50px !important;
  border: 2px solid var(--accent) !important;
  background: var(--background) !important;
  box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.1) !important;
  cursor: pointer !important;
  top: -8px !important;
  transform: translateX(-50%) !important;
}

/* Remove default little bars */
.noUi-handle::before,
.noUi-handle::after {
  display: none !important;
}

/* RTL Support */
[dir="rtl"] .noUi-horizontal .noUi-handle {
  transform: translateX(50%) !important;
}

[dir="rtl"] .noUi-horizontal {
  direction: rtl !important;
}

/* ========== TYPOGRAPHY UTILITY CLASSES ========== */

/* Headings */
.text-h0 {
  font-size: var(--font-h0--size);
  line-height: var(--font-h0--line-height);
  font-weight: var(--font-h0--weight);
}

.text-h1 {
  font-size: var(--font-h1--size);
  line-height: var(--font-h1--line-height);
  font-weight: var(--font-h1--weight);
}

.text-h2 {
  font-size: var(--font-h2--size);
  line-height: var(--font-h2--line-height);
  font-weight: var(--font-h2--weight);
}

.text-h3 {
  font-size: var(--font-h3--size);
  line-height: var(--font-h3--line-height);
  font-weight: var(--font-h3--weight);
}

.text-h4 {
  font-size: var(--font-h4--size);
  line-height: var(--font-h4--line-height);
  font-weight: var(--font-h4--weight);
}

.text-h5 {
  font-size: var(--font-h5--size);
  line-height: var(--font-h5--line-height);
  font-weight: var(--font-h5--weight);
}

.text-h6 {
  font-size: var(--font-h6--size);
  line-height: var(--font-h6--line-height);
  font-weight: var(--font-h6--weight);
}

/* Body Text - Large (16px) */
.text-subtitle1 {
  font-size: var(--font-subtitle1--size);
  line-height: var(--font-subtitle1--line-height);
  font-weight: var(--font-subtitle1--weight);
}

.text-body1 {
  font-size: var(--font-body1--size);
  line-height: var(--font-body1--line-height);
  font-weight: var(--font-body1--weight);
}

.text-link1 {
  font-size: var(--font-body1--size);
  line-height: var(--font-body1--line-height);
  font-weight: var(--font-body1--weight);
  text-decoration: underline;
}

/* Body Text - Regular (14px) */
.text-subtitle2 {
  font-size: var(--font-subtitle2--size);
  line-height: var(--font-subtitle2--line-height);
  font-weight: var(--font-subtitle2--weight);
}

.text-body2 {
  font-size: var(--font-body2--size);
  line-height: var(--font-body2--line-height);
  font-weight: var(--font-body2--weight);
}

.text-link2 {
  font-size: var(--font-body2--size);
  line-height: var(--font-body2--line-height);
  font-weight: var(--font-subtitle2--weight);
  text-decoration: underline;
}

/* Caption Text (12px) */
.text-caption-bold {
  font-size: var(--font-caption-bold--size);
  line-height: var(--font-caption-bold--line-height);
  font-weight: var(--font-caption-bold--weight);
}

.text-caption {
  font-size: var(--font-caption--size);
  line-height: var(--font-caption--line-height);
  font-weight: var(--font-caption--weight);
}

.text-link-caption {
  font-size: var(--font-caption--size);
  line-height: var(--font-caption--line-height);
  font-weight: var(--font-caption--weight);
  text-decoration: underline;
}

/* Tagline (16px, small-caps) */
.text-tagline {
  font-size: var(--font-tagline--size);
  line-height: var(--font-tagline--line-height);
  font-weight: var(--font-tagline--weight);
  font-variant: all-small-caps;
}

/* ========== TYPOGRAPHY MODIFIERS ========== */

/* Small caps modifier - use with any text class */
.text-caps {
  font-variant: all-small-caps;
}

/* ========== HEADLESS PRODUCT COMPONENTS ========== */

/* ---------- Product Options (Variant Selectors) ---------- */
.product-options {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.product-options__group {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.product-options__label {
  font-size: var(--font-subtitle2--size);
  font-weight: var(--font-subtitle2--weight);
  line-height: var(--font-subtitle2--line-height);
  color: var(--foreground);
}

/* List Style (ul/li clickable items) */
.product-options__list {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  list-style: none;
  padding: 0;
  margin: 0;
}

.product-options__item {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.5rem 1rem;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  background: var(--background);
  color: var(--foreground);
  font-size: var(--font-body2--size);
  line-height: var(--font-body2--line-height);
  cursor: pointer;
  transition: all 0.15s ease;
  user-select: none;
}

.product-options__item:hover {
  border-color: var(--foreground);
}

.product-options__item.active {
  border-color: var(--primary);
  background: var(--primary);
  color: var(--primary-foreground);
}

/* Dropdown Style (select) */
.product-options__select {
  width: 100%;
  padding: 0.75rem 1rem;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  background: var(--background);
  color: var(--foreground);
  font-size: var(--font-body1--size);
  line-height: var(--font-body1--line-height);
  cursor: pointer;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23545352' stroke-width='2'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 0.75rem center;
  padding-right: 2.5rem;
}

[dir="rtl"] .product-options__select {
  background-position: left 0.75rem center;
  padding-right: 1rem;
  padding-left: 2.5rem;
}

.product-options__select:hover {
  border-color: var(--foreground);
}

.product-options__select:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--primary) 20%, transparent);
}

/* ---------- Custom Fields ---------- */
.custom-field {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.custom-field__label {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  font-size: var(--font-subtitle2--size);
  font-weight: var(--font-subtitle2--weight);
  line-height: var(--font-subtitle2--line-height);
  color: var(--foreground);
}

.custom-field__required {
  color: var(--destructive);
}

.custom-field__price {
  color: var(--muted-foreground);
  font-weight: var(--font-body2--weight);
}

.custom-field__hint {
  font-size: var(--font-caption--size);
  line-height: var(--font-caption--line-height);
  color: var(--muted-foreground);
  margin: 0;
}

/* Text Input */
.custom-field__input {
  width: 100%;
  padding: 0.75rem 1rem;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  background: var(--background);
  color: var(--foreground);
  font-size: var(--font-body1--size);
  line-height: var(--font-body1--line-height);
  transition:
    border-color 0.15s ease,
    box-shadow 0.15s ease;
}

.custom-field__input::placeholder {
  color: var(--muted-foreground);
}

.custom-field__input:hover {
  border-color: var(--foreground);
}

.custom-field__input:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--primary) 20%, transparent);
}

/* Select (Dropdown) */
.custom-field__select {
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23545352' stroke-width='2'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 0.75rem center;
  padding-right: 2.5rem;
  cursor: pointer;
}

[dir="rtl"] .custom-field__select {
  background-position: left 0.75rem center;
  padding-right: 1rem;
  padding-left: 2.5rem;
}

/* Textarea */
.custom-field__textarea {
  min-height: 120px;
  resize: vertical;
}

/* Checkbox Group */
.custom-field__options {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.custom-field__option {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  cursor: pointer;
  font-size: var(--font-body2--size);
  line-height: var(--font-body2--line-height);
  color: var(--foreground);
}

.custom-field__checkbox {
  width: 1.25rem;
  height: 1.25rem;
  border: 1px solid var(--border);
  border-radius: calc(var(--radius) * 0.5);
  background: var(--background);
  cursor: pointer;
  accent-color: var(--primary);
}

.custom-field__checkbox:checked {
  background: var(--primary);
  border-color: var(--primary);
}

.custom-field__option-label {
  display: flex;
  align-items: center;
  gap: 0.25rem;
}

.custom-field__option-price {
  color: var(--muted-foreground);
}

/* ---------- File Upload ---------- */
.file-upload {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.75rem 1rem;
  border: 1px dashed var(--border);
  border-radius: var(--radius);
  background: var(--secondary);
  min-height: 3rem;
}

.file-upload__delete {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 1.5rem;
  height: 1.5rem;
  padding: 0.25rem;
  border-radius: 50%;
  background: var(--destructive);
  color: white;
  cursor: pointer;
  transition: opacity 0.15s ease;
  flex-shrink: 0;
}

.file-upload__delete:hover {
  opacity: 0.8;
}

.file-upload__delete-icon {
  width: 0.875rem;
  height: 0.875rem;
}

.file-upload__preview {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 2rem;
  height: 2rem;
  border-radius: calc(var(--radius) * 0.5);
  overflow: hidden;
  background: var(--background);
  flex-shrink: 0;
}

.file-upload__preview-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.file-upload__name {
  flex: 1;
  font-size: var(--font-body2--size);
  line-height: var(--font-body2--line-height);
  color: var(--muted-foreground);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.file-upload__button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.5rem 1rem;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  background: var(--background);
  color: var(--foreground);
  font-size: var(--font-body2--size);
  font-weight: var(--font-subtitle2--weight);
  cursor: pointer;
  transition: all 0.15s ease;
  white-space: nowrap;
  flex-shrink: 0;
}

.file-upload__button:hover {
  border-color: var(--foreground);
  background: var(--foreground);
  color: var(--background);
}

/* ---------- Custom Field Wrapper (for spacing between fields) ---------- */
.custom-field-wrapper {
  margin-bottom: 1rem;
}

.custom-field-wrapper:last-child {
  margin-bottom: 0;
}

/* ========================================
   PhotoSwipe Lightbox Custom Styles
   ======================================== */

/* Background */
.pswp {
  --pswp-bg: #000;
}

/* Close button */
.pswp__button--close {
  position: absolute;
  top: 16px;
  right: 16px;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: none;
  color: white;
  cursor: pointer;
  opacity: 0.8;
  transition: opacity 0.2s;
}

.pswp__button--close:hover {
  opacity: 1;
}

/* Arrow buttons */
.pswp__button--arrow {
  width: 44px;
  height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(8px);
  border-radius: var(--radius);
  color: white;
  opacity: 0.8;
  transition:
    opacity 0.2s,
    background 0.2s;
}

.pswp__button--arrow:hover {
  opacity: 1;
  background: rgba(255, 255, 255, 0.2);
}

.pswp__button--arrow--prev {
  left: 16px;
}

.pswp__button--arrow--next {
  right: 16px;
}

/* RTL support */
[dir="rtl"] .pswp__button--arrow--prev {
  left: auto;
  right: 16px;
}

[dir="rtl"] .pswp__button--arrow--next {
  right: auto;
  left: 16px;
}

[dir="rtl"] .pswp__button--arrow svg {
  transform: rotate(180deg);
}

/* Main image */
.pswp__img {
  border-radius: var(--radius-lg);
  object-fit: contain;
}

/* Custom thumbnails strip */
.pswp-custom-thumbs {
  position: absolute;
  bottom: 16px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 8px;
  padding: 8px;
  z-index: 10;
}

.pswp-custom-thumb {
  width: 100px;
  height: 104px;
  padding: 0;
  border: 2px solid transparent;
  border-radius: var(--radius);
  overflow: hidden;
  cursor: pointer;
  opacity: 0.6;
  transition:
    opacity 0.2s,
    border-color 0.2s;
  background: transparent;
}

.pswp-custom-thumb:hover {
  opacity: 0.9;
}

.pswp-custom-thumb--active {
  opacity: 1;
  border-color: white;
}

.pswp-custom-thumb img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* Hide default counter */
.pswp__counter {
  display: none;
}

/* Zoom indicator */
.pswp__zoom-wrap {
  will-change: transform;
}

/* Loading indicator */
.pswp__preloader {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

/* Mobile adjustments */
@media (max-width: 640px) {
  .pswp__button--arrow {
    width: 36px;
    height: 36px;
  }

  .pswp__button--arrow--prev {
    left: 8px;
  }

  .pswp__button--arrow--next {
    right: 8px;
  }

  .pswp-custom-thumbs {
    bottom: 8px;
    gap: 4px;
    padding: 4px;
  }

  .pswp-custom-thumb {
    width: 60px;
    height: 64px;
  }
}

/* ========================================
   PROSE TYPOGRAPHY THEME (Static Pages)
   Custom theme matching Figma design tokens
   ======================================== */

@utility prose-theme {
  --tw-prose-body: var(--foreground);
  --tw-prose-headings: var(--foreground);
  --tw-prose-lead: var(--foreground);
  --tw-prose-links: var(--foreground);
  --tw-prose-bold: var(--foreground);
  --tw-prose-counters: var(--foreground);
  --tw-prose-bullets: var(--foreground);
  --tw-prose-hr: var(--border);
  --tw-prose-quotes: var(--foreground);
  --tw-prose-quote-borders: var(--foreground);
  --tw-prose-captions: var(--muted-foreground);
  --tw-prose-kbd: var(--foreground);
  --tw-prose-kbd-shadows: 0 0 0;
  --tw-prose-code: var(--foreground);
  --tw-prose-pre-code: var(--foreground);
  --tw-prose-pre-bg: var(--secondary);
  --tw-prose-th-borders: var(--border);
  --tw-prose-td-borders: var(--border);
  /* Invert (dark mode) */
  --tw-prose-invert-body: var(--foreground);
  --tw-prose-invert-headings: var(--foreground);
  --tw-prose-invert-lead: var(--foreground);
  --tw-prose-invert-links: var(--foreground);
  --tw-prose-invert-bold: var(--foreground);
  --tw-prose-invert-counters: var(--foreground);
  --tw-prose-invert-bullets: var(--foreground);
  --tw-prose-invert-hr: var(--border);
  --tw-prose-invert-quotes: var(--foreground);
  --tw-prose-invert-quote-borders: var(--foreground);
  --tw-prose-invert-captions: var(--muted-foreground);
  --tw-prose-invert-kbd: var(--foreground);
  --tw-prose-invert-kbd-shadows: 0 0 0;
  --tw-prose-invert-code: var(--foreground);
  --tw-prose-invert-pre-code: var(--foreground);
  --tw-prose-invert-pre-bg: var(--secondary);
  --tw-prose-invert-th-borders: var(--border);
  --tw-prose-invert-td-borders: var(--border);
}

/* ========================================
   PROSE TYPOGRAPHY OVERRIDES
   Custom styles to match Figma exactly
   ======================================== */

.prose.prose-theme {
  /* Lead paragraph (first paragraph) - semibold */

  > p:first-of-type {
    font-weight: var(--font-subtitle1--weight);
  }

  /* Headings - match Figma font sizes and spacing */

  h1,
  h2,
  h3 {
    font-size: var(--font-h3--size);
    line-height: var(--font-h3--line-height);
    font-weight: var(--font-h3--weight);
    margin-top: 24px;
    margin-bottom: 0;
  }

  h4 {
    font-size: var(--font-h4--size);
    line-height: var(--font-h4--line-height);
    font-weight: var(--font-h4--weight);
    margin-top: 24px;
    margin-bottom: 0;
  }

  h5 {
    font-size: var(--font-h5--size);
    line-height: var(--font-h5--line-height);
    font-weight: var(--font-h5--weight);
    margin-top: 24px;
    margin-bottom: 0;
  }

  h6 {
    font-size: var(--font-h6--size);
    line-height: var(--font-h6--line-height);
    font-weight: var(--font-h6--weight);
    margin-top: 24px;
    margin-bottom: 0;
  }

  /* Paragraphs */

  p {
    font-size: var(--font-body1--size);
    line-height: var(--font-body1--line-height);
    margin-top: 0;
    margin-bottom: 16px;
  }

  /* Blockquote - match Figma with 2px left border */

  blockquote {
    font-style: italic;
    font-weight: var(--font-body1--weight);
    border-inline-start-width: 2px;
    padding-inline-start: 40px;
    padding-inline-end: 24px;
    padding-top: 36px;
    padding-bottom: 36px;
    margin-top: 0;
    margin-bottom: 0;
    quotes: none;
  }

  blockquote p {
    margin-bottom: 0;
  }

  blockquote p::before,
  blockquote p::after {
    content: none;
  }

  /* Links */

  a {
    text-decoration: underline;
  }

  /* Images with rounded corners */

  img {
    border-radius: var(--radius-lg);
  }

  /* Code blocks */

  pre {
    border-radius: var(--radius-lg);
  }

  code {
    border-radius: var(--radius);
  }

  /* Table header background */

  th {
    background: var(--secondary);
  }
}

/* ========================================
   SAFELIST - Dynamic classes used in templates
   These classes are generated dynamically via Jinja
   and need to be included for Tailwind JIT to scan
   ======================================== */
/* Product card aspect ratios & image fit */
/* aspect-square aspect-[3/4] h-auto h-full object-cover */
/* Category hero dynamic classes */
/* min-h-[300px] md:min-h-[400px] md:py-16 md:py-8 */
.announcement-marquee {
  display: flex;
  width: 100%;
}

.announcement-marquee__content {
  display: flex;
  align-items: center;
  animation: marquee-scroll var(--marquee-speed, 30s) linear infinite;
}

[dir="rtl"] .announcement-marquee__content {
  animation-name: marquee-scroll-rtl;
}

.announcement-marquee:hover .announcement-marquee__content {
  animation-play-state: paused;
}

@keyframes marquee-scroll {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(-50%);
  }
}

@keyframes marquee-scroll-rtl {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(50%);
  }
}
